<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<?import javafx.scene.shape.Circle?>
<?import javafx.scene.control.Tooltip?>
<StackPane prefHeight="750.0" prefWidth="1000.0" styleClass="light-theme" stylesheets="@../styles/tinder-theme.css"
           xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="client.controllers.MessagesController">

    <BorderPane>
        <center>
            <SplitPane dividerPositions="0.3" style="-fx-background-color: transparent; -fx-padding: 0;">

                <VBox minWidth="280.0" spacing="10.0" styleClass="sidebar-light">
                    <padding><Insets top="15" right="10" bottom="10" left="15"/></padding>

                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button text="â†" onAction="#backToHome" style="-fx-background-color: transparent; -fx-text-fill: #0084ff; -fx-font-size: 18px; -fx-cursor: hand; -fx-padding: 0;"/>
                        <Label text="Chats" textFill="BLACK"><font><Font name="System Bold" size="24.0" /></font></Label>
                    </HBox>

                    <TextField fx:id="searchField" promptText="ðŸ” TÃ¬m kiáº¿m trÃªn Tinder" styleClass="light-field" />

                    <ListView fx:id="matchesListView" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-border-width: 0;"/>
                </VBox>

                <VBox fx:id="chatArea" styleClass="chat-area-light" spacing="0">

                    <HBox alignment="CENTER_LEFT" spacing="15.0" styleClass="chat-header" style="-fx-padding: 10 20 10 20;">

                        <ImageView fx:id="partnerAvatarView" fitWidth="40" fitHeight="40" pickOnBounds="true" preserveRatio="true">
                            <clip>
                                <Circle centerX="20" centerY="20" radius="20" />
                            </clip>
                        </ImageView>

                        <Label fx:id="currentPartnerLabel" text="Chá»n ngÆ°á»i Ä‘á»ƒ nháº¯n tin" textFill="#262626" HBox.hgrow="ALWAYS" maxWidth="Infinity">
                            <font><Font name="System Bold" size="18.0" /></font>
                        </Label>

                        <Button onAction="#viewPartnerProfile" text="â“˜"
                                style="-fx-background-color: transparent; -fx-text-fill: #0095f6; -fx-font-size: 24px; -fx-cursor: hand; -fx-padding: 0;">
                            <tooltip>
                                <Tooltip text="Xem há»“ sÆ¡ chi tiáº¿t"/>
                            </tooltip>
                        </Button>
                    </HBox>

                    <ListView fx:id="chatListView" styleClass="chat-list-view" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-border-width: 0;"/>

                    <HBox alignment="CENTER" spacing="10.0" style="-fx-padding: 15; -fx-background-color: white;">
                        <Button onAction="#handleSendFile" text="ðŸ“·" style="-fx-text-fill: #0084ff; -fx-background-color: transparent; -fx-font-size: 20px; -fx-cursor: hand;"/>
                        <TextField fx:id="messageInputField" promptText="Nháº­p tin nháº¯n..." styleClass="light-field" HBox.hgrow="ALWAYS" onAction="#handleSendMessage"/>
                        <Button onAction="#handleSendMessage" text="Gá»­i" style="-fx-text-fill: #0084ff; -fx-background-color: transparent; -fx-font-weight: bold; -fx-font-size: 15px; -fx-cursor: hand;"/>
                    </HBox>
                </VBox>
            </SplitPane>
        </center>
    </BorderPane>

    <VBox fx:id="imageOverlay" alignment="CENTER" visible="false" onMouseClicked="#closeImageOverlay" style="-fx-background-color: rgba(0,0,0,0.9);">
        <ImageView fx:id="enlargedImageView" preserveRatio="true" fitHeight="700" fitWidth="900" />
        <Label text="Nháº¥n ra ngoÃ i Ä‘á»ƒ Ä‘Ã³ng" textFill="WHITE" style="-fx-padding: 20; -fx-font-size: 16px;"/>
    </VBox>

</StackPane>