<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>

<StackPane fx:id="rootPane" prefHeight="700.0" prefWidth="1000.0" stylesheets="@../styles/tinder-theme.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="client.controllers.MessagesController">

    <BorderPane style="-fx-background-color: white;">

        <left>
            <VBox prefWidth="320.0" styleClass="chat-sidebar" BorderPane.alignment="CENTER">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <padding><Insets top="20.0" right="20.0" bottom="20.0" left="20.0" /></padding>
                    <Button onAction="#backToHome" style="-fx-background-color: transparent; -fx-cursor: hand; -fx-text-fill: #aaa; -fx-font-size: 14px; -fx-font-weight: bold;" text="&lt; Back" />
                    <Label text="Chats" textFill="WHITE">
                        <font><Font name="System Bold" size="24.0" /></font>
                    </Label>
                </HBox>

                <VBox style="-fx-padding: 10;">
                    <TextField fx:id="searchField" promptText="TÃ¬m kiáº¿m..." styleClass="search-field" />
                </VBox>

                <ListView fx:id="userListView" styleClass="conversation-list-view" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;"/>
            </VBox>
        </left>

        <center>
            <StackPane>
                <VBox fx:id="placeholderArea" alignment="CENTER" spacing="20.0" style="-fx-background-color: #f8f9fa;">
                    <Label text="Chá»n má»™t ngÆ°á»i Ä‘á»ƒ báº¯t Ä‘áº§u" textFill="#888888">
                        <font><Font size="18.0" /></font>
                    </Label>
                </VBox>

                <VBox fx:id="chatArea" style="-fx-background-color: white;" visible="false">

                    <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-border-color: #eee; -fx-border-width: 0 0 1 0;">
                        <padding><Insets top="15.0" right="20.0" bottom="15.0" left="20.0" /></padding>
                        <ImageView fx:id="partnerAvatarView" fitHeight="40.0" fitWidth="40.0" pickOnBounds="true" preserveRatio="true">
                            <clip><Circle centerX="20" centerY="20" radius="20" /></clip>
                        </ImageView>
                        <VBox alignment="CENTER_LEFT">
                            <Label fx:id="currentPartnerLabel" text="Username" textFill="#262626">
                                <font><Font name="System Bold" size="18.0" /></font>
                            </Label>
                            <Label text="Äang hoáº¡t Ä‘á»™ng" textFill="#888888" style="-fx-font-size: 12px;" />
                        </VBox>
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#viewPartnerProfile" style="-fx-background-color: transparent; -fx-cursor: hand; -fx-text-fill: #fd267a;" text="Xem há»“ sÆ¡" />
                    </HBox>

                    <ListView fx:id="chatListView" styleClass="chat-list-view" VBox.vgrow="ALWAYS" />

                    <HBox alignment="CENTER_LEFT" style="-fx-border-color: #eee; -fx-border-width: 1 0 0 0;">
                        <padding><Insets top="15.0" right="20.0" bottom="15.0" left="20.0" /></padding>
                        <Button onAction="#handleSendFile" style="-fx-background-color: transparent; -fx-cursor: hand; -fx-font-size: 20px;" text="ðŸ“·" />
                        <TextField fx:id="messageInputField" onAction="#handleSendMessage" promptText="Nháº­p tin nháº¯n..." style="-fx-background-color: transparent; -fx-font-size: 14px;" HBox.hgrow="ALWAYS">
                            <HBox.margin><Insets left="10.0" right="10.0" /></HBox.margin>
                        </TextField>
                        <Button onAction="#handleSendMessage" style="-fx-background-color: transparent; -fx-text-fill: #fd267a; -fx-font-weight: bold; -fx-cursor: hand;" text="Gá»­i" />
                    </HBox>
                </VBox>
            </StackPane>
        </center>

    </BorderPane>

    <VBox fx:id="imageOverlay" visible="false" alignment="CENTER" style="-fx-background-color: rgba(0,0,0,0.8);" onMouseClicked="#closeImageOverlay">
        <ImageView fx:id="enlargedImageView" preserveRatio="true" fitHeight="600" fitWidth="800" />
        <Label text="Nháº¥n Ä‘á»ƒ Ä‘Ã³ng" textFill="WHITE" style="-fx-padding: 20;" />
    </VBox>

</StackPane>